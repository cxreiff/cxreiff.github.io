{"mappings":"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","sources":["src/features/shaders/shaders.component.tsx","src/common/shaderDemo/shaderDemo.component.tsx","src/common/shaderView/shaderView.component.tsx","src/common/shaderView/shaderView.module.scss","src/common/shaderDemo/shaderDemo.module.scss","src/assets/shaders/shader1.vert","src/assets/shaders/shader1.frag","src/assets/shaders/shader2.vert","src/assets/shaders/shader2.frag","src/assets/shaders/shader3.vert","src/assets/shaders/shader3.frag","src/assets/shaders/shader4.vert","src/assets/shaders/shader4.frag","src/assets/shaders/shader5.vert","src/assets/shaders/shader5.frag"],"sourcesContent":["import { FC } from \"react\";\n\nimport { ShaderDemo } from \"~src/common/shaderDemo/shaderDemo.component\";\nimport { ShaderViewProps } from \"~src/common/shaderView/shaderView.component\";\n\nimport vertexShader1 from \"~src/assets/shaders/shader1.vert\";\nimport fragmentShader1 from \"~src/assets/shaders/shader1.frag\";\nimport vertexShader2 from \"~src/assets/shaders/shader2.vert\";\nimport fragmentShader2 from \"~src/assets/shaders/shader2.frag\";\nimport vertexShader3 from \"~src/assets/shaders/shader3.vert\";\nimport fragmentShader3 from \"~src/assets/shaders/shader3.frag\";\nimport vertexShader4 from \"~src/assets/shaders/shader4.vert\";\nimport fragmentShader4 from \"~src/assets/shaders/shader4.frag\";\nimport vertexShader5 from \"~src/assets/shaders/shader5.vert\";\nimport fragmentShader5 from \"~src/assets/shaders/shader5.frag\";\n\nconst Shaders: FC = () => (\n  <section>\n    {(\n      [\n        {\n          vertexShader: vertexShader1,\n          fragmentShader: fragmentShader1,\n          primitive: \"triangle strip\",\n          position: [\n            [-1.0, -1.0, +0, +1],\n            [+1.0, -1.0, +0, +1],\n            [-1.0, +1.0, +0, +1],\n            [+1.0, +1.0, +0, +1],\n          ],\n        },\n        {\n          vertexShader: vertexShader2,\n          fragmentShader: fragmentShader2,\n          primitive: \"triangle strip\",\n          position: [\n            [-0.7, -0.7, +0, +1],\n            [+0.7, -0.7, +0, +1],\n            [-0.7, +0.7, +0, +1],\n            [+0.7, +0.7, +0, +1],\n          ],\n        },\n        {\n          vertexShader: vertexShader3,\n          fragmentShader: fragmentShader3,\n          primitive: \"triangle strip\",\n          position: [\n            [-0.7, -0.7, +0, +1],\n            [+0.7, -0.7, +0, +1],\n            [-0.7, +0.7, +0, +1],\n            [+0.7, +0.7, +0, +1],\n          ],\n        },\n        {\n          vertexShader: vertexShader4,\n          fragmentShader: fragmentShader4,\n          primitive: \"triangle strip\",\n          position: [\n            [-0.7, -0.7, +0, +1],\n            [+0.7, -0.7, +0, +1],\n            [-0.7, +0.7, +0, +1],\n            [+0.7, +0.7, +0, +1],\n          ],\n        },\n        {\n          vertexShader: vertexShader5,\n          fragmentShader: fragmentShader5,\n          primitive: \"triangle strip\",\n          position: [\n            [-0.7, -0.7, +0, +1],\n            [+0.7, -0.7, +0, +1],\n            [-0.7, +0.7, +0, +1],\n            [+0.7, +0.7, +0, +1],\n          ],\n        },\n      ] as ShaderViewProps[]\n    ).map((props, index) => (\n      <ShaderDemo key={index} {...props} />\n    ))}\n  </section>\n);\n\nexport default Shaders;\n","import { FC } from \"react\";\n\nimport { useAppSelector } from \"~/src/app/store\";\nimport { Theme } from \"~/src/features/theme/theme.slice\";\nimport {\n  SyntaxHighlighter,\n  styleLight,\n  styleDark,\n} from \"~/src/utilities/syntaxHighlighter\";\nimport {\n  ShaderView,\n  ShaderViewProps,\n} from \"../shaderView/shaderView.component\";\n\nimport styles from \"./shaderDemo.module.scss\";\n\nfunction omitHidden(input: string) {\n  return input.replace(\n    /\\/\\/\\[demo_hide\\]([\\s\\S]*?)\\/\\/\\[demo_hide_end\\]/g,\n    \"{...}\"\n  );\n}\n\nexport const ShaderDemo: FC<ShaderViewProps> = ({\n  vertexShader,\n  fragmentShader,\n  ...props\n}) => {\n  const theme = useAppSelector((state) => state.theme.theme);\n\n  return (\n    <section className={styles.shader_demo}>\n      <div className={styles.shader_view}>\n        <ShaderView\n          vertexShader={vertexShader}\n          fragmentShader={fragmentShader}\n          {...props}\n        />\n      </div>\n      <div className={styles.shader_syntax}>\n        <SyntaxHighlighter\n          language={\"glsl\"}\n          style={theme === Theme.DARKMODE ? styleDark : styleLight}\n        >\n          {omitHidden(vertexShader)}\n        </SyntaxHighlighter>\n        <SyntaxHighlighter\n          language={\"glsl\"}\n          style={theme === Theme.DARKMODE ? styleDark : styleLight}\n        >\n          {omitHidden(fragmentShader)}\n        </SyntaxHighlighter>\n      </div>\n    </section>\n  );\n};\n","import { FC, useEffect, useRef } from \"react\";\nimport Regl, { Vec2, Vec4, PrimitiveType } from \"regl\";\n\nimport { Frame } from \"../frame/frame.component\";\nimport styles from \"./shaderView.module.scss\";\n\ninterface Uniforms {\n  u_resolution: Vec2;\n  u_time: number;\n}\n\ninterface Attributes {\n  position: Vec4[];\n}\n\nexport type ShaderViewProps = {\n  vertexShader: string;\n  fragmentShader: string;\n  position: Vec4[];\n  primitive: PrimitiveType;\n};\n\nexport const ShaderView: FC<ShaderViewProps> = ({\n  vertexShader,\n  fragmentShader,\n  position,\n  primitive,\n}) => {\n  const ref = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    if (ref.current) {\n      const regl = Regl(ref.current);\n      const drawVertices = regl<Uniforms, Attributes>({\n        vert: vertexShader,\n        frag: fragmentShader,\n        attributes: {\n          position,\n        },\n        uniforms: {\n          u_resolution: [\n            regl.context(\"viewportWidth\"),\n            regl.context(\"viewportHeight\"),\n          ],\n          u_time: regl.context(\"time\"),\n        },\n        primitive,\n        count: 4,\n      });\n      regl.frame(() => {\n        regl.clear({ color: [0, 0, 0, 0], depth: 1 });\n        drawVertices();\n      });\n    }\n  }, [ref, vertexShader, fragmentShader]);\n\n  return (\n    <Frame aspect={1 / 1} className={styles.shader_view}>\n      <canvas ref={ref} width={800} height={800} />\n    </Frame>\n  );\n};\n","@use \"../../shared.scss\" as *;\n@use \"../../themed.scss\" as *;\n\n.shader_view {\n  @include card($color-background-container, true, false);\n\n  width: 100%;\n  height: 100%;\n\n  & > canvas {\n    margin: 0;\n  }\n}\n","@use \"../../shared.scss\" as *;\n@use \"../../themed.scss\" as *;\n\n.shader_demo {\n  margin-bottom: 2rem;\n\n  @include is_larger_than($sm-breakpoint) {\n    display: grid;\n    gap: 1rem;\n    align-items: center;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n  }\n}\n\n.shader_syntax {\n  & > pre {\n    @include card($color-background-container, true, false);\n\n    margin: 0 !important;\n    &:not(:last-child) {\n      margin-bottom: 1rem !important;\n    }\n  }\n}\n\n.shader_view {\n  height: 240px;\n  margin-bottom: 1rem;\n\n  @include is_larger_than($sm-breakpoint) {\n    height: 100%;\n    margin-bottom: initial;\n  }\n}\n","precision mediump float;\n\nuniform float u_time;\nattribute vec4 position;\n\nvoid main() {\n    gl_Position = position;\n}\n","precision mediump float;\n\nuniform vec2 u_resolution;\nuniform float u_time;\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / u_resolution;\n    float color = 0.0;\n\n    color += sin(uv.y * cos(u_time / 21.0) * 12.0)\n        + sin(uv.x * cos(u_time / 10.0) * 20.0);\n    color += sin(uv.x * cos(u_time / 43.0) * 24.0)\n        + cos(uv.y * cos(u_time / 20.0) * 30.0);\n    color += sin(uv.y * sin(u_time / 65.0) * 36.0)\n        + cos(uv.x * sin(u_time / 30.0) * 40.0);\n    color += sin(uv.x * sin(u_time / 87.0) * 48.0)\n        + sin(uv.y * sin(u_time / 40.0) * 50.0);\n\n    gl_FragColor = vec4(\n        color * 0.65,\n        color * 0.45,\n        color * 0.85,\n        1.0\n    );\n}\n","precision mediump float;\n\nuniform float u_time;\nattribute vec4 position;\n\nmat4 rotate_z(float theta)\n{\n    return mat4(\n        vec4( cos(theta), sin(theta), 0.0, 0.0),\n        vec4(-sin(theta), cos(theta), 0.0, 0.0),\n        vec4(        0.0,        0.0, 1.0, 0.0),\n        vec4(        0.0,        0.0, 0.0, 1.0)\n    );\n}\n\nvoid main() {\n    gl_Position = rotate_z(u_time) * position;\n}\n","precision mediump float;\n\nuniform vec2 u_resolution;\nuniform float u_time;\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / u_resolution;\n\n    gl_FragColor = vec4(\n        0.65 * (sin(u_time + uv.x) * 0.3 + 0.7),\n        0.45 * (cos(u_time + uv.y) * 0.3 + 0.7),\n        0.85 * (sin(u_time + uv.x) * 0.3 + 0.7),\n        1.0\n    );\n}\n","precision mediump float;\n\nuniform float u_time;\nattribute vec4 position;\n\nmat4 rotate_x(float theta)\n{\n    return mat4(\n        vec4(1.0,         0.0,        0.0, 0.0),\n        vec4(0.0,  cos(theta), sin(theta), 0.0),\n        vec4(0.0, -sin(theta), cos(theta), 0.0),\n        vec4(0.0,         0.0,        0.0, 1.0)\n    );\n}\n\nmat4 projection(float perspective)\n{\n    return mat4(\n        vec4(1.0, 0.0, 0.0, 0.0),\n        vec4(0.0, 1.0, 0.0, 0.0),\n        vec4(0.0, 0.0, 1.0, perspective),\n        vec4(0.0, 0.0, 0.0, 1.0)\n    );\n}\n\nvoid main() {\n    gl_Position = projection(0.3) * rotate_x(u_time) * position;\n}\n","precision mediump float;\n\nuniform vec2 u_resolution;\nuniform float u_time;\n\nvoid main() //[demo_hide]\n{\n    vec2 uv = gl_FragCoord.xy / u_resolution;\n\n    gl_FragColor = vec4(\n        0.65 * (sin(u_time + uv.x) * 0.3 + 0.7),\n        0.45 * (cos(u_time + uv.y) * 0.3 + 0.7),\n        0.85 * (sin(u_time + uv.x) * 0.3 + 0.7),\n        1.0\n    );\n} //[demo_hide_end]\n","precision mediump float;\n\nuniform float u_time;\nuniform vec2 u_resolution;\nattribute vec4 position;\n\nmat4 view_frustum(\n    float angle,\n    float aspect,\n    float near,\n    float far\n) //[demo_hide]\n{\n    return mat4(\n        vec4(1.0/tan(angle), 0.0, 0.0, 0.0),\n        vec4(0.0, aspect/tan(angle), 0.0, 0.0),\n        vec4(0.0, 0.0, (far+near)/(far-near), 1.0),\n        vec4(0.0, 0.0, -2.0*far*near/(far-near), 0.0)\n    );\n} //[demo_hide_end]\n\nmat4 translate(float x, float y, float z)\n{\n    return mat4(\n        vec4(1.0, 0.0, 0.0, 0.0),\n        vec4(0.0, 1.0, 0.0, 0.0),\n        vec4(0.0, 0.0, 1.0, 0.0),\n        vec4(x,   y,   z,   1.0)\n    );\n}\n\nvoid main() {\n    float aspect = u_resolution.x / u_resolution.y;\n    gl_Position = view_frustum(radians(45.0), aspect, 0.5, 5.0)\n        * translate(cos(u_time), 0.0, 3.0 + sin(u_time))\n        * position;\n}\n","precision mediump float;\n\nuniform vec2 u_resolution;\nuniform float u_time;\n\nvoid main() //[demo_hide]\n{\n    vec2 uv = gl_FragCoord.xy / u_resolution;\n\n    gl_FragColor = vec4(\n        0.65 * (sin(u_time + uv.x) * 0.3 + 0.7),\n        0.45 * (cos(u_time + uv.y) * 0.3 + 0.7),\n        0.85 * (sin(u_time + uv.x) * 0.3 + 0.7),\n        1.0\n    );\n} //[demo_hide_end]\n","precision mediump float;\n\nuniform float u_time;\nuniform vec2 u_resolution;\nattribute vec4 position;\n\nmat4 scale(float x, float y, float z) //[demo_hide]\n{\n    return mat4(\n        vec4(x,   0.0, 0.0, 0.0),\n        vec4(0.0, y,   0.0, 0.0),\n        vec4(0.0, 0.0, z,   0.0),\n        vec4(0.0, 0.0, 0.0, 1.0)\n    );\n} //[demo_hide_end]\n\nmat4 translate(float x, float y, float z) //[demo_hide]\n{\n    return mat4(\n        vec4(1.0, 0.0, 0.0, 0.0),\n        vec4(0.0, 1.0, 0.0, 0.0),\n        vec4(0.0, 0.0, 1.0, 0.0),\n        vec4(x,   y,   z,   1.0)\n    );\n} //[demo_hide_end]\n\nmat4 rotate_x(float theta) //[demo_hide]\n{\n    return mat4(\n        vec4(1.0,         0.0,         0.0, 0.0),\n        vec4(0.0,  cos(u_time),  sin(u_time), 0.0),\n        vec4(0.0, -sin(u_time),  cos(u_time), 0.0),\n        vec4(0.0,         0.0,         0.0, 1.0)\n    );\n} //[demo_hide_end]\n\nmat4 view_frustum(\n    float angle,\n    float aspect,\n    float near,\n    float far\n) {\n    return mat4(\n        vec4(1.0/tan(angle), 0.0, 0.0, 0.0),\n        vec4(0.0, aspect/tan(angle), 0.0, 0.0),\n        vec4(0.0, 0.0, (far+near)/(far-near), 1.0),\n        vec4(0.0, 0.0, -2.0*far*near/(far-near), 0.0)\n    );\n}\n\nvoid main() {\n    float aspect = u_resolution.x / u_resolution.y;\n    gl_Position = view_frustum(radians(45.0), aspect, 0.5, 5.0)\n        * translate(cos(u_time), 0.0, 3.0 + sin(u_time))\n        * rotate_x(u_time)\n        * scale(aspect, 1.0, 1.0)\n        * position;\n}\n","precision mediump float;\n\nuniform vec2 u_resolution;\nuniform float u_time;\n\nvoid main() //[demo_hide]\n{\n    vec2 uv = gl_FragCoord.xy / u_resolution;\n\n    gl_FragColor = vec4(\n        0.65 * (sin(u_time + uv.x) * 0.3 + 0.7),\n        0.45 * (cos(u_time + uv.y) * 0.3 + 0.7),\n        0.85 * (sin(u_time + uv.x) * 0.3 + 0.7),\n        1.0\n    );\n} //[demo_hide_end]\n"],"names":["$lKtKv","parcelRequire","$7f07a3dc4c62428a$export$2e2bcd8739ae039","jsx","vertexShader","$parcel$interopDefault","$71QI2","fragmentShader","$9Snka","primitive","position","$1HWdX","$gfI2p","$cfhpa","$4nQBY","$iTBi2","$cjOH7","$4fMU3","$3eT6d","map","props","index","$3Lj83","ShaderDemo","$6a46d818bcf6984f$var$omitHidden","input","replace","$6a46d818bcf6984f$export$c691ce0b43a64cb2","theme","$hTxeE","useAppSelector","state","jsxs","className","$hOEIm","shader_demo","shader_view","$cflIb","ShaderView","shader_syntax","$cqg0o","SyntaxHighlighter","language","style","$ee91V","Theme","DARKMODE","styleDark","styleLight","$7567eb09d751c200$export$ec92a3ab06ae2ae2","ref","$fPSy9","useRef","useEffect","current","regl","$lrQbr","drawVertices","vert","frag","attributes","uniforms","u_resolution","context","u_time","count","frame","clear","color","depth","$gHXkF","Frame","aspect","$ePSYF","width","height","$acd0798002a968fa$export$447389b194657347","$cf86b037a886b2fb$export$157037839347bb9","$cf86b037a886b2fb$export$fa3e70b0974fa065","$cf86b037a886b2fb$export$447389b194657347","module","exports"],"version":3,"file":"shaders.component.eba870c2.js.map"}